Pokemon Patched Crystal

This hack fixes the generation 2 bugs and adds certain tweaks but still retain the original gameplay and features.

!!NOTICE!!

It is highly recommended to make backups of your saves when trying out a new release.
Saving to the 2nd floor of a pokemon center is advised for the best results.

You can now join The Uber Archive Discord server for the latest release, news or submit any bug reports!

https://discord.com/invite/5Xu54kDeJS


!Changelog!


~~~Retail~~~

~~3.12~~

Mystery Gift via NPC implementation. Carrie, the girl that enables Mystery Gift at the
Goldenrod Department Store will also offer to Mystery Gift with you once per day.
The item range is exactly the same as the real Mystery Gift along with
the ever rare Mirage and Bluesky mail (decorations are excluded at the moment)

Considering the above change, Buena's Password rewards have changed
with the removal of the mail rewards. In addition, the MysteryBerry has been swappped
with the MiracleBerry in the rewards list

Wild encounter rates have been adjusted due to certain pokemon not appearing

TM09 - Psych Up is now sold on the Celadon Deptartment Store (3F) instead of Saffron Mart

~~3.11~~

-Reverted the additional encounters of the following pokemon:
(you can still find said pokemon, only the extra encounters included by me were removed)
Scyther, Natu, Xatu, Teddiursa, Phanpy

-Squirtle is now found only on Route 34 (Surf)

-Link Cord now costs 8000 pokedollars

-Fixed an incorrect NPC sprite outside the Battle Tower

-Fixed an issue where the list of moves in the Move Reminder would
incorrectly display Ghost type moves as Dark types and vice versa

~~3.10d~~

-Reverted the change that allowed for more phone contacts saved on the Pokegear
to restore general compatibility (E.G. Stadium 2)
This change makes current saves incompatible, however, saves from version 3.9a
will work so use these if you got them backed up. Apologies for the inconvinience

-Fixed a bug with scrolling through the Saffron City Mart item list would crash the game

-Fixed a text wrap issue in Whitney's Rematch dialog

-The Trainer House battle no longer has a daily limit


~~3.10c~~

-Removed Scope Lens and Twisted Spoon as Pokemart goods

-Removed Metal Coat and Thick Club as possible treasure from smashing rocks

-Adjusted the chances of treasure you might get from smashing rocks

-Scope Lens, Twisted Spoon, Lucky Punch and Light Ball are now available
as possible rewards after clearing the Battle Tower (Full list of rewards included in FAQ.txt)

-Fixed some incorrect text regarding Battle Tower rewards

-Blue Sky, Mirage, Eon, Morph and Music mail are now available
to purchase with Blue Card points

-The top of the Gym Leader's heads is now longer cut out on the trainer card


~~3.10b~~

-Actually fixed a bug where sometimes the shiny version of a caught pokemon would be shown instead of the default one
in the pokedex registration

-Reverted changes to "Makefile" to restore Mystery gift compatibility

-You are now allowed to release EGGs via the PC

~~3.10a~~

-Fixed a bug where PRZ and BRN stat reductions dont apply to swithed pokemon (Singleplayer battles only)

-Fixed a bug where pokemon deposited to the Day Care might lose experience points

-Fixed a bug where the AI would use its base reward value as an item

-Fixed a bug where you could fish on top of NPCs

-Fixed a bug where the RUN SFX does not play correctly when a wild Pokémon flees from battle

-Fixed a few typos and inaccuracies in text

-Fixed a bug where sometimes the shiny version of a caught pokemon would be shown instead of the default one
in the pokedex registration

~~3.10~~

-Fixed an issue with the Day/Nite icon on the Bug-Catching Contest battle menu

-Fixed an issue with Tackle's impact image not displaying fully

-Totodile is now found during the day on Route 31 instead of Cherrygrove City

-Along with Gym Leaders, the Elite Four also use different parties of pokemon for rematches
once MT. Silver is unlocked. The parties are as close to the remakes as much as possible

-Both Gym Leader and Elite Four rematch parties use the exact same levels as the remake ones

-Cooltrainer Rose has been removed

-Mew is now found in the 4th secret Unown inscription chamber at the Ruins of Alph. To access this chamber
you need to have Ho-Oh in your party. Eusine will also hint towards it too

-Prof. Oak's dialog was tweaked to also mention the Elite Four being available for rematch with
stronger teams

-A custom Crystal SGB border (unknown author) is now bundled

~~3.9c~~

-Fixed an issue with incorrect overworld sprites (For real this time)

-Fixed an issue where a caught pokemon's pokeball would be shown over the stats window after a level up

~~3.9b~~

-You can now register all 32 available phone numbers into your pokegear. Due to this change however older saves
are not compatible, i do suggest you to still keep a backup of those in the possible future that this will be
addressed, apologies for the inconvenience.


~~3.9a~~

-The title screen is finally altered! It now shows "Patched Crystal" as the subtitle and also a version number

-Due to an oversight Buena's Password used to air the moment it was night time instead of 18:00 like the original
game, this has been fixed and the original schedule is in effect

~~3.9~~

-Dire Hit, Guard Spec, Gold and Silver Leaf are now included in the random rewards pool of Battle Tower.

-Fixed an incorrect check on the Master Ball Battle Tower reward

-Evolutionary stones and Link Cord now cost 4000 pokedollars

-Hard Stone and Soft Sand are now slightly more common to be found by smashing rocks

-Twineedle can no longer inflict PSN on STEEL types

-Tri-Attack can no longer inflict BRN on FIRE types and FRZ on ICE types

-When a repel item runs out, you will be asked to use another of the same type like in later games

-The starter sprites that are being shown before picking one are now in color

~~3.8~~

-Smashing rocks now has a chance to give the player one of the following items:

-Nugget
-Star Piece
-Big Pearl
-Pearl
-Brick Piece
-Metal Coat
-Hard Stone
-Soft Sand
-Thick Club
-Dome Fossil
-Helix Fossil
-Old Amber

-With the existance of fossils from the above addition, you can no longer find Kabuto and Omanyte in the wild.

-You can revive your fossils with the help of the new Scientist NPC inside the Ruins of Alph Research Center.

-The time of day (Day or Night) can now be seen with an icon on the main battle menu.

-When picking up or receiving TMs as gifts the name of the move will also be shown.

-The Mew you are given after defeating Cooltrainer Rose now holds Stardust.

~~3.7~~

-You can now choose one of many unique colors for your Pokedex UI in its SELECT menu

-All 251 pokemon now have uniquely colored sprites in menus while using FLY and the day care, shiny
variants and shiny egg included.

-Cooltrainer Rose's dialog has been tweaked

-Removed Lucky Egg from Buena's Password rewards

~~3.6b~~

-Fixed an issue where incorrect overworld sprites would be used for NPCs

-Fixed some text wrapping issues with some Gym Leader's dialog

-Adjusted ".gitignore" list so that cloning the repo and compiling works

~~3.6a~~

-Fixed an oversight where not all new rewards were included for the Battle Tower
said rewards are the following (subject to change):

-MasterBall x1
-Revive x5
-Max Potion x5
-Full Restore x5
-Hp Up x5
-Protein x5
-Iron x5
-Carbos x5
-Calcium x5
-Rare Candy x5 
-Full Heal x5
-PP Up x5
-Berserk Gene x5
-Normal Box x1
-Gorgeous Box x1

-Tweaked Buena's Password rewards both in costs and actual rewards which are the following (subject to change):

2 Blue Card points: Ultra Ball, Full Restore
3 Blue Card points: Nugget, Rare Candy
5 Blue Card points: Protein, Iron, Carbos, Calcium, HP Up
6 Blue Card points: PP Up
7 Blue Card points: Gold Leaf
8 Blue Card points: Silver Leaf
9 Blue Card points: Mysteryberry, Gold Berry, Berry Juice, Lucky Egg, Lucky Punch, Mirage Mail

~~3.6~~

-Move Deleter's House is now Move Expert's House since it now also hosts the Move Reminder
to teach your pokemon forgotten moves! (Thanks to TPP, Polished Crystal and Another PKMN Crystal Remaster open source code)

-Both the Battle Tower and Buena's Password are packed with additional new rewards (subject to change)! (Huge thanks to Pret Discord for helping out!)

-You can now see the shiny variant of a pokemon in the pokedex by pressing SELECT.(Another thanks to Pret for its github tutorial)

-Cooltrainer Rose's overworld sprite has changed

~~3.5 Late/Early Anniversary Edition~~

-Berry Trees now have a chance to drop between 1 to 5 berries, same with Apricorn Trees

-Gym Leader rematch teams have been tweaked to be as similar to the gen 2 remake teams as possible

~~3.4~~

-Kurt will now immediately make balls, no need to wait an entire day.

-Changing the time now only requires to press DOWN + B on the title screen, no password needed.

-The Lucky number show is now daily instead of weekly.

-Poliwhirl and Slowpoke now need to use the Link Cord item to evolve into Politoed and Slowking respectively.

-Trainer card now has a Kanto badges page and both pages use colored badges.

-Weather conditions are shown with an icon during move selection while active.

-Pokemon acquire EXP when you capture a wild pokemon like in later games.

-All Gym Leaders are now available for a rematch with stronger teams once you gain access to MT. Silver

-Cooltrainer Rose now appears once you gain access to MT. Silver

~~3.3~~

-Restored some random encounters.

~~3.2~~

-Fixed a bug where after a rematch with Lt. Surge the game would crash.

-Fixed a bug with Up-grade not being usable to evolve Porygon into Porygon2


~~3.1~~

-Fixed a bug where NPCs would appear during the wrong parts of the game.


~~3.0~~

-Updated to the latest repo of pokecrystal (as of 14/02/2022)

-Fixed a bug where using Surf to travel through water would crash the game

-Times of day changed back again to the values bellow:
Morning: 06:00 - 12:59
Day: 13:00 - 19:59
Night: 20:00 - 05:59

-Evolutionary stones along with a new item the "Link Cord" can now be bought at
the Goldenrod Department Store 4F

-Link Cord acts as an evolutionary stone to evolve the following pokemon:
Haunter, Machoke, Graveler, Kadabra, Seadra, Onix, Scyther

-Up-grade now acts as an evolutionary stone too to evolve Porygon into Porygon2
and it can now be bought at Saffron Mart

-Pichu, Cleffa, Igglypuff and Togepi, Golbat and Chansey now evolve via happiness again


~~2.1~~

-Removed the experience farming trainer

-Re-included all of the evolutionary stones in the Goldenrod Department Store

-The trainer which gives you Mew now has a different name and dialog

-You can no longer acquire TMs you already own

-Morning/Day/Nite times are reverted back to the originals

-TM09 (Psych Up) and Twisted Spoon removed from the Mahogany mart and instead placed in the Saffron one


~~2.0~~

-Ported all the changes/fixes to the latest code (as of 24/07/2021)

-A new trainer is unlocked at the Goldenrod Game Corner once you get Mew. When you beat him, he will provide experience farming battles.

~~1.0~~

-Fixed a bug where ScriptCall can overflow wScriptStack and crash

-Fixed a bug where LoadSpriteGFX does not limit the capacity of UsedSprites

-Fixed a bug where ChooseWildEncounter doesn't really validate the wild Pokémon species

-Fixed arbitrary code execution via TryObjectEvent

-Fixed a bug where ClearWRAM only clears WRAM bank 1

-Fixed a bug where the game would crash after defeating Cooltrainer Rose after a rematch

-TM09 can now be bought at the Goldenrod Department Store 5F

-PP UP can now be bought at the Goldenrod Department Store 4F

-The held item Twisted Spoon can now be bought at the Mahogany town mart after Team Rocket is defeated

-Fixed the Squirtle encounter in Whirl Islands B2F

-Setting the time during a new game now properly shows the part of day of the chosen hour


~~~Beta~~~

~~1.1a - 1.1b ~~

-Fixed a bug which caused the game to crash while entering Victory Road

-Fixed a few glitches of the trainer that rewards you with Mew at Mt. Moon Square

-Removed the Legendary Birds from the "Often flees" group

-Tweaked the text of all gym leaders

~~1.1~~

-Dark Type is now treated as "Physical" instead of "Special"

-Kanto Legendaries can now be encountered in the overworld, more info on "Encounters&Evolutions.txt"

-Mew is now given as a reward by defeating a trainer at Mt. Moon Square

-NPC trades are reverted back to the originals

-Adjusted some dialog of Morty and Falkner

~~1.0~~

-Patched Crystal now uses the latest pokecrystal repo as base (as of 21/02/2018)

[For developers]: If you run the command make patched-crystal it will build patched-crystal.gbc

-Fixed the bugs of the followind items: Thick Club, Light Ball, Metal Powder

-Fixed a bug with moves that lower Defense can do so after breaking a Substitute

-Fixed a bug where a Disabled but PP Up–enhanced move may not trigger Struggle

-Fixed a bug where Beat Up could desynchronize link battles

-Fixed a bug where Present damage is incorrect in link battles

-Fixed a bug where the AI encourages Mean Look if its own Pokémon is badly poisoned

-Fixed a bug where the NPC use of Full Heal or Full Restore does not cure Nightmare status

-Fixed a bug where the HP bar animation is slow for high HP

-Fixed the HP bar animation off-by-one error for low HP

-Fixed a bug where Five-digit experience gain is printed incorrectly

-Fixed a bug where Daisy's grooming doesn't always increase happiness

-Fixed a bug where Magikarp in Lake of Rage are shorter, not longer

-Fixed a bug where Magikarp lengths can be miscalculated

-Fixed a bug where Slot machine payout sound effects would cut each other off

-Fixed a bug where Team Rocket battle music was not used for Executives or Scientists

-Fixed a bug where No bump noise would trigger if standing on tile $3E

-Fixed a bug where Playing Entei's Pokédex cry can distort Raikou's and Suicune's

~~0.9~~

-Belly Drum no longer provides a stat boost when the move fails

-Pichu, Cleffa and Igglypuff now evolve at level 15

-Togepi now evolves at level 30

-Skarmory can now be found during the day at:
Route 38

-Phanpy can now be found during the day at:
Dark Cave (Violet City entrance)

-Smeargle can now be found during the day at:
Sprout Tower 2F, 3F

-Scyther can now be found during the day at:
National Park

-Remoraid can now be found at:
Cianwood, Olivine City (Surf)

-Octillery can now be found at:
Cianwood City (Surf)

-Mantine can now be found at:
Cianwood, Olivine City (Surf)

-Corsola can now be found at:
Route 34, Olivine City (Surf)

~~0.8~~

-Lugia and Ho-Oh now possess their signature moves when you encounter them instead of Gust.

-Larvitar can now be found rarely during the day at:
Route 42

-Misdreavus can now be found on Johto rarely during the night at:
Sprout/Tin Tower, Route 31, 32

~~0.7a~~

-GS Ball / Celebi Event now work

~~0.7~~

-Every Gym Leader is now available for a rematch,
simply talk to them again and a simple "yes or no" option will appear.

~~0.6~~

-Evolutionary stones can now be purchased from the Goldenrod Department Store 2F

-Natu can now be found during the day at:
Tin Tower 2F

-Xatu can now be found rarely during the day or night at:
Tin Tower 2F

-Scyther can now be found during the day at:
Ilex Forest

-Kanto Legendaries can now be obtained via in-game trades, subject to change.

-Zapdos is now available via in-game trade in Goldenrod City

-Moltres is now available via in-game trade in Violet City

-Articuno is now available via in-game trade in Olivine City

-Mewtwo is now available via in-game trade in the Power Plant

-Mew is now available via in-game trade in Pewter City

~~0.5~~

-TMs are now infinite use

-Golbat evolves into Crobat at level 35

-Chansey evolves into Blissey at level 40

-Houndour can now be found on Johto rarely during the day and mostly during the night at:
Route 36, 37

-Murkrow can now be found on Johto during the night at:
Route 38

-Slugma can now be found on Johto during the day at:
Burned Tower B1F

-Vulpix can be found during the morning and day at:
Route 36, 37, 7, 8

-Mankey can be found rarely during the morning and mostly during the day at:
Route 42, 9

-Mareep can be found mostly during the morning and day at:
Route 32, 42, 43

-Girafarig can be found rarely during the morning and day at:
Route 43

-Remoraid and Octillery can mostly be found at bodies of water using both rods and SURF besides swarms semi done

-Chikorita can be found only during morning at:
Route 31

-Cyndaquil can be found only during the night at:
Dark cave (Violet city entrance)

-Totodile can be found only during the day at:
Cherrygrove city (Water)

-Bulbasaur can be found only during morning and night at:
Ilex Forest

-Charmander can be found only during the night at:
Burned Tower B1F

-Squirtle can be found at all times at:
Whirl Islands B2F

-Omanyte and Kabuto can be found only during the night at:
Whirl Islands in Lugia's Chamber (not in the water)


~~0.4~~

-Dragon Fang increases the power of Dragon-type attacks as intented

-Some Evolutions were tweaked, you can also find this list in the "Encounters and Evolutions" text file.

***These methods are subject to change***

Haunter evolves into Gengar at level 40

Machoke evolves into Machamp at level 35

Graveler evolves into Golem at level 35

Kadabra evolves into Alakazam at level 35

Eevee evolves into Espeon by using a Sun Stone

Eevee evolves into Umbreon by using a Moon Stone

Seadra evolves into Kingdra at level 40

Onix evolves into Steelix at level 35

Scyther evolves into Scizor at level 25

Slowpoke evolves into Slowking by using a Water Stone

Poliwhirl evolves into Politoed at level 30

Porygon evolves into Porygon2 at level 30

~~0.3~~

-Slight time system adjustment. This was done for the sake of a more broad use of all phases of a day from the
players and to reflect better on the real world. Subject to change.

Previous:

Morning: 4:00 - 9:59
Day: 10:00 - 17:59
Night: 18:00 PM - 03:59

Current:

Morning: 06:00 - 12:59
Day: 13:00 - 19:59
Night: 20:00 - 05:59

~~0.2~~

-Love ball works as intended

~~0.1~~

-Ghost type attacks take advantage of Special Attack stat instead of Attack stat.

-Haunter now evolves into Gengar at level 40. (This was done for testing purposes and kept as is)

-Moon ball and Fast ball work as intended now.

-Status ailments increase a pokemon's catch rate as they should.
